{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n              <section class=\"card\">\n              <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n              </a>\n              <div class=\"gallery-container\">\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Likes</p>\n                  <p class=\"gallery-count\">${imgInfo.likes}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Views</p>\n                  <p class=\"gallery-count\">${imgInfo.views}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Comments</p>\n                  <p class=\"gallery-count\">${imgInfo.comments}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Downloads</p>\n                  <p class=\"gallery-count\">${imgInfo.downloads}</p>\n                </div>\n              </div>\n            </section>\n          </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      q: searchedQuery,\n      key: '48306389-9c3f7e9b102fd2bc2270acf47',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n// ============================================\n// export const fetchPhotosByQuery = searchedQuery => {\n//   const searchParams = new URLSearchParams({\n//     q: searchedQuery,\n//     key: '48306389-9c3f7e9b102fd2bc2270acf47',\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: 'true',\n//     page: 1,\n//     per_page: '15',\n//   });\n\n//   return fetch(`https://pixabay.com/api/?${searchParams.toString()}`).then(\n//     response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     }\n//   );\n// };\n","import iziToast from 'izitoast'; // Завантажимо бібліотеки\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\n// Отримуємо посилання на елементи сторінки\nconst searchFormEl = document.querySelector('.js-form-search');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n//Ініціалізація SimpleLightbox- створення модального вікна,\n//(зображення відкривається у великому розмірі).\nlet gallerySimpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 300,\n});\n\n//номер сторінки результатів пошуку. Починаємо з 1.\nlet page = 1;\n\n//зберігає ключове слово, яке ввів користувач у формі.\nlet searchedQuery = '';\n\n//загальна кількість доступних зображень для заданого ключового слова (повертається API).\nlet totalHits = 0;\n\n//ф-ія викликається при сабміті форми\nconst onSearchFormSubmit = async event => {\n  try {\n    // Запобігаємо перезавантаженню сторінки\n    event.preventDefault();\n\n    //зчитуємо значення з інпута, видаляючи пробіли\n    searchedQuery = event.currentTarget.elements.user_query.value.trim('');\n    //перевірка, чи інпут не порожній\n    if (searchedQuery === '') {\n      iziToast.error({\n        title: '',\n        messageColor: 'Purple',\n        color: 'red',\n        position: 'topRight',\n        message: 'Please enter your request',\n        messageSize: '20',\n      });\n      return;\n    }\n    //відкриємо 1 сторінку при кожному пошуку\n    page = 1;\n    //сховаємо кнопку Load More\n    loadMoreBtn.classList.add('hidden');\n    //Видалимо клас is-hidden для показу індикатора завантаження\n    loader.classList.remove('is-hidden');\n    //Зробили запит поключовому слову searchedQuery\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n    //перевірка на неіснуюче слово в інпуті\n    //Якщо на сервері немає зображень за таким пошуком, відображається сповіщення про помилку.\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        messageColor: 'Purple',\n        color: 'red',\n        position: 'topRight',\n        messageSize: '20',\n        message: 'Sorry, there are no images. Please try again!',\n      });\n\n      galleryEl.innerHTML = ''; //почистили галерею\n      searchFormEl.reset(); //почистили імпут\n\n      return;\n    }\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    if (data.total.hits > page * 15) {\n      loadMoreBtn.classList.remove('hidden');\n      // loadMoreBtn.addEventListener('click'.onLoadMoreBtnClick);\n    }\n    gallerySimpleLightbox.refresh();\n\n    //генеруємо розмітку(якщо є зображення, формуємо рядок з розміткою)\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n    //ховаємо індикатор завантаження\n    loader.classList.add('is-hidden');\n\n    //відмальовуємо зображення на сторінці\n    galleryEl.innerHTML = galleryTemplate;\n\n    //Покажемо кнопку load-more --приберемо клас hidden\n    loadMoreBtn.classList.remove('hidden');\n\n    //слухаємо подію клік на кнопці\n    loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\n    //ховаємо індикатор завантаження\n    loader.classList.add('is-hidden');\n\n    //оновлюємо галерею SimpleLightbox\n    gallerySimpleLightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loader.classList.remove('is-hidden');\n  }\n};\n\n//очистимо форму після завершення запиту\nsearchFormEl.reset();\n\n// Додаємо обробник події на форму пошуку\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n//опишемо ф-ію\nconst onLoadMoreBtnClick = async () => {\n  const { data } = await fetchPhotosByQuery(searchedQuery, page);\n  try {\n    page++;\n    const { data } = await fetchPhotosByQuery(query, page);\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    //Перевірка, якщо користувач дійшов до кінця колекції, ховай кнопку\n    if (page * 15 >= data.totalHits || data.hits.length === 0) {\n      iziToast.show({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n      loadMoreBtn.classList.add('hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      return;\n    }\n    const smoothScroll = document.querySelector('.gallery-item');\n    if (smoothScroll) {\n      const cardHeight = smoothScroll.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message:\n        'The image you requested could not be loaded. Please try again later.',\n    });\n  }\n};\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n// ===================================================================\n\n//--------------------------------------------------------------------------------------------------------------\n// // Завантажимо бібліотеки\n\n// import iziToast from 'izitoast';\n// import SimpleLightbox from 'simplelightbox';\n\n// import { createGalleryCardTemplate } from './js/render-functions';\n// import { fetchPhotosByQuery } from './js/pixabay-api';\n// // Отримуємо посилання на елементи сторінки\n// const searchFormEl = document.querySelector('.js-form-search');\n// const galleryEl = document.querySelector('.js-gallery');\n// const loader = document.querySelector('.loader');\n// // Ініціалізація SimpleLightbox\n// let gallerySLB = new SimpleLightbox('.gallery a', {\n//   captionsData: 'alt',\n//   captionDelay: 300,\n// });\n// //ф-ія викликається при сабміті форми\n// const onSearchFormSubmit = event => {\n//   // Запобігаємо перезавантаженню сторінки\n//   event.preventDefault();\n//   //зчитуємо значення з інпута, видаляючи пробіли\n//   const searchedQuery = event.currentTarget.elements.user_query.value.trim('');\n//   //перевірка, чи інпут не порожній\n//   if (searchedQuery === '') {\n//     iziToast.error({\n//       title: 'Error',\n//       messageColor: 'Purple',\n//       color: 'red',\n//       position: 'topRight',\n//       message: 'Please enter your request',\n//       messageSize: '20',\n//     });\n//     return;\n//   }\n//   //Видалимо клас is-hidden для показу індикатора завантаження\n//   loader.classList.remove('is-hidden');\n//   fetchPhotosByQuery(searchedQuery) //запит на сервер\n//     .then(data => {\n//       //перевірка на неіснуюче слово в інпуті\n//       //Якщо на серверінемає зображень за таким пошуком, відображається сповіщення про помилку.\n//       if (data.total === 0) {\n//         iziToast.error({\n//           title: 'Error',\n//           messageColor: 'Purple',\n//           color: 'red',\n//           position: 'topRight',\n//           messageSize: '20',\n//           message: 'Sorry, there are no images. Please try again!',\n//         });\n//         galleryEl.innerHTML = ''; //почистили галерею\n//         searchFormEl.reset(); //почистили імпут\n//         return;\n//       }\n//       //генеруємо розмітку(якщо є зображення, формуємо рядок з розміткою)\n//       const galleryTemplate = data.hits\n//         .map(el => createGalleryCardTemplate(el))\n//         .join('');\n//       //відмальовуємо зображення на сторінці\n//       galleryEl.innerHTML = galleryTemplate;\n//       //ховаємо індикатор завантаження\n//       loader.classList.add('is-hidden');\n//       //оновлюємо галерею SimpleLightbox\n//       gallerySLB.refresh();\n//     })\n//     //Якщо є помилка, ховається індикатор завантаження, а помилка виводиться в консоль.\n//     .catch(err => {\n//       loader.style.display = 'none';\n//       console.log(err);\n//     });\n//   //очистимо форму після завершення запиту\n//   searchFormEl.reset();\n// };\n\n// // Додаємо обробник події на форму пошуку\n// searchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n// ====================================\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadMoreBtn","gallerySimpleLightbox","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","data","galleryTemplate","el","onLoadMoreBtnClick","err","smoothScroll","cardHeight"],"mappings":"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"}