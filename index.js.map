{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n              <section class=\"card\">\n              <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n              </a>\n              <div class=\"gallery-container\">\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Likes</p>\n                  <p class=\"gallery-count\">${imgInfo.likes}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Views</p>\n                  <p class=\"gallery-count\">${imgInfo.views}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Comments</p>\n                  <p class=\"gallery-count\">${imgInfo.comments}</p>\n                </div>\n                <div class=\"gallery-item\">\n                  <p class=\"gallery-title\">Downloads</p>\n                  <p class=\"gallery-count\">${imgInfo.downloads}</p>\n                </div>\n              </div>\n            </section>\n          </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      q: searchedQuery,\n      key: '48306389-9c3f7e9b102fd2bc2270acf47',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n// ============================================\n// export const fetchPhotosByQuery = searchedQuery => {\n//   const searchParams = new URLSearchParams({\n//     q: searchedQuery,\n//     key: '48306389-9c3f7e9b102fd2bc2270acf47',\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: 'true',\n//     page: 1,\n//     per_page: '15',\n//   });\n\n//   return fetch(`https://pixabay.com/api/?${searchParams.toString()}`).then(\n//     response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     }\n//   );\n// };\n","import iziToast from 'izitoast'; // Завантажимо бібліотеки\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\n// Отримуємо посилання на елементи сторінки\nconst searchFormEl = document.querySelector('.js-form-search');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n//Ініціалізація SimpleLightbox- створення модального вікна,\n//(зображення відкривається у великому розмірі).\nlet gallerySimpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 300,\n});\n\n//номер сторінки результатів пошуку. Починаємо з 1.\nlet page = 1;\n\n//зберігає ключове слово, яке ввів користувач у формі.\nlet searchedQuery = '';\n\n//ф-ія викликається при сабміті форми\nconst onSearchFormSubmit = async event => {\n  try {\n    // Запобігаємо перезавантаженню сторінки\n    event.preventDefault();\n    loader.style.display = 'none';\n\n    //зчитуємо значення з інпута, видаляючи пробіли\n    searchedQuery = event.currentTarget.elements.user_query.value.trim('');\n    //перевірка, чи інпут не порожній\n    if (searchedQuery === '') {\n      iziToast.error({\n        title: '',\n        messageColor: 'Purple',\n        color: 'red',\n        position: 'topRight',\n        message: 'Please enter your request',\n        messageSize: '20',\n      });\n      return;\n    }\n    // відкриємо 1 сторінку при кожному пошуку\n    page = 1;\n\n    //сховаємо кнопку Load More\n    loadMoreBtn.classList.add('hidden');\n    // //Видалимо клас is-hidden для показу індикатора завантаження\n    // loader.classList.remove('is-hidden');\n\n    //Зробили запит поключовому слову searchedQuery\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n    //перевірка на неіснуюче слово в інпуті\n    //Якщо на сервері немає зображень за таким пошуком, відображається сповіщення про помилку.\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        messageColor: 'Purple',\n        color: 'red',\n        position: 'topRight',\n        messageSize: '20',\n        message: 'Sorry, there are no images. Please try again!',\n      });\n      galleryEl.innerHTML = ''; //почистили галерею\n      searchFormEl.reset(); //почистили імпут\n      return;\n    }\n    // якщо на сервері > 1 групи зображень\n    if (data.totalHits > 1) {\n      loadMoreBtn.classList.remove('hidden');\n      // слухаємо подію клік на кнопці, якщо >1 групи зображень\n      loadMoreBtn.addEventListener('click'.onLoadMoreBtnClick);\n\n      //генеруємо розмітку(якщо є зображення, формуємо рядок з розміткою)\n      const galleryTemplate = data.hits\n        .map(el => createGalleryCardTemplate(el))\n        .join('');\n      //відмалювали картки в галереї\n      galleryEl.innerHTML = galleryTemplate;\n      // //Покажемо кнопку load-more --приберемо клас hidden\n      loadMoreBtn.classList.remove('hidden');\n\n      // //слухаємо подію клік на кнопці\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n// Додаємо обробник події на форму пошуку\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n//опишемо ф-ію обробнику кліку\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n    // робимо запит по ключовому слову searchedQuery\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n    //генеруємо розмітку(якщо є зображення, формуємо рядок з розміткою)\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    //додаємо нові зображення в кінець нашого списку\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    //коли настає кінець колекції\n    if (page === data.totalHits) {\n      // ховаэмо кнопку\n      loadMoreBtnEl.classList.add('is-hidden');\n      //припиняємо прослуховування на кнопці\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n// iziToast.err({\n//   title: 'Error',\n//   position: 'topRight',\n//   message: 'The image you requested could not be loaded. Please try again later.',\n\n// });\n\n//       const galleryTemplate = data.results\n//         .map(el => createGalleryCardTemplate(el))\n//         .join('');\n\n//\n//\n\n//         iziToast.info({\n//           title: 'Info',\n//           position: 'topRight',\n//           message: \"There are no more images matching your request.\",\n//         });\n//\n\n//\n//       }\n//     }\n//     const smoothScroll = document.querySelector('.gallery-item');\n//     if(smoothScroll) {\n//      const cardHeight = smoothScroll.getBoundingClientRect().height;\n//       window.scrollBy({\n//         top: cardHeight * 2,\n//         behavior: 'smooth',\n//       });\n//     }\n\n// ===================================================================\n\n//--------------------------------------------------------------------------------------------------------------\n// // Завантажимо бібліотеки\n\n// import iziToast from 'izitoast';\n// import SimpleLightbox from 'simplelightbox';\n\n// import { createGalleryCardTemplate } from './js/render-functions';\n// import { fetchPhotosByQuery } from './js/pixabay-api';\n// // Отримуємо посилання на елементи сторінки\n// const searchFormEl = document.querySelector('.js-form-search');\n// const galleryEl = document.querySelector('.js-gallery');\n// const loader = document.querySelector('.loader');\n// // Ініціалізація SimpleLightbox\n// let gallerySLB = new SimpleLightbox('.gallery a', {\n//   captionsData: 'alt',\n//   captionDelay: 300,\n// });\n// //ф-ія викликається при сабміті форми\n// const onSearchFormSubmit = event => {\n//   // Запобігаємо перезавантаженню сторінки\n//   event.preventDefault();\n//   //зчитуємо значення з інпута, видаляючи пробіли\n//   const searchedQuery = event.currentTarget.elements.user_query.value.trim('');\n//   //перевірка, чи інпут не порожній\n//   if (searchedQuery === '') {\n//     iziToast.error({\n//       title: 'Error',\n//       messageColor: 'Purple',\n//       color: 'red',\n//       position: 'topRight',\n//       message: 'Please enter your request',\n//       messageSize: '20',\n//     });\n//     return;\n//   }\n//   //Видалимо клас is-hidden для показу індикатора завантаження\n//   loader.classList.remove('is-hidden');\n//   fetchPhotosByQuery(searchedQuery) //запит на сервер\n//     .then(data => {\n//       //перевірка на неіснуюче слово в інпуті\n//       //Якщо на серверінемає зображень за таким пошуком, відображається сповіщення про помилку.\n//       if (data.total === 0) {\n//         iziToast.error({\n//           title: 'Error',\n//           messageColor: 'Purple',\n//           color: 'red',\n//           position: 'topRight',\n//           messageSize: '20',\n//           message: 'Sorry, there are no images. Please try again!',\n//         });\n//         galleryEl.innerHTML = ''; //почистили галерею\n//         searchFormEl.reset(); //почистили імпут\n//         return;\n//       }\n//       //генеруємо розмітку(якщо є зображення, формуємо рядок з розміткою)\n//       const galleryTemplate = data.hits\n//         .map(el => createGalleryCardTemplate(el))\n//         .join('');\n//       //відмальовуємо зображення на сторінці\n//       galleryEl.innerHTML = galleryTemplate;\n//       //ховаємо індикатор завантаження\n//       loader.classList.add('is-hidden');\n//       //оновлюємо галерею SimpleLightbox\n//       gallerySLB.refresh();\n//     })\n//     //Якщо є помилка, ховається індикатор завантаження, а помилка виводиться в консоль.\n//     .catch(err => {\n//       loader.style.display = 'none';\n//       console.log(err);\n//     });\n//   //очистимо форму після завершення запиту\n//   searchFormEl.reset();\n// };\n\n// // Додаємо обробник події на форму пошуку\n// searchFormEl.addEventListener('submit', onSearchFormSubmit);\n\n// ====================================\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadMoreBtn","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","data","galleryTemplate","el","onLoadMoreBtnClick","err"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,8CAEqCA,EAAQ,aAAa;AAAA,gDACnBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6CAK7CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,6CAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,6CAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,6CAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,iBCnBjDC,EAAqB,CAACC,EAAeC,IAAgB,CAChE,MAAMC,EAAe,CACnB,OAAQ,CACN,EAAGF,EACH,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACX,CACL,EACE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC3D,ECRME,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAI/B,IAAIC,EAAe,aAAc,CAC3D,aAAc,MACd,aAAc,GAChB,CAAC,EAGD,IAAIC,EAAO,EAGPT,EAAgB,GAGpB,MAAMU,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAQF,GANAA,EAAM,eAAc,EACpBL,EAAO,MAAM,QAAU,OAGvBN,EAAgBW,EAAM,cAAc,SAAS,WAAW,MAAM,KAAK,EAAE,EAEjEX,IAAkB,GAAI,CACxBY,EAAS,MAAM,CACb,MAAO,GACP,aAAc,SACd,MAAO,MACP,SAAU,WACV,QAAS,4BACT,YAAa,IACrB,CAAO,EACD,MACD,CAEDH,EAAO,EAGPF,EAAY,UAAU,IAAI,QAAQ,EAKlC,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMd,EAAmBC,EAAeS,CAAI,EAI7D,GAAII,EAAK,QAAU,EAAG,CACpBD,EAAS,MAAM,CACb,MAAO,GACP,aAAc,SACd,MAAO,MACP,SAAU,WACV,YAAa,KACb,QAAS,+CACjB,CAAO,EACDP,EAAU,UAAY,GACtBD,EAAa,MAAK,EAClB,MACD,CAED,GAAIS,EAAK,UAAY,EAAG,CACtBN,EAAY,UAAU,OAAO,QAAQ,EAErCA,EAAY,iBAAiB,QAAQ,kBAAkB,EAGvD,MAAMO,EAAkBD,EAAK,KAC1B,IAAIE,GAAMlB,EAA0BkB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVV,EAAU,UAAYS,EAEtBP,EAAY,UAAU,OAAO,QAAQ,EAGrCA,EAAY,iBAAiB,QAASS,CAAkB,CACzD,CACF,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAb,EAAa,iBAAiB,SAAUM,CAAkB,EAG1D,MAAMM,EAAqB,MAAML,GAAS,CACxC,GAAI,CACFF,IAEA,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMd,EAAmBC,EAAeS,CAAI,EAGvDK,EAAkBD,EAAK,KAC1B,IAAIE,GAAMlB,EAA0BkB,CAAE,CAAC,EACvC,KAAK,EAAE,EAGVV,EAAU,mBAAmB,YAAaS,CAAe,EAErDL,IAASI,EAAK,YAEhB,cAAc,UAAU,IAAI,WAAW,EAEvC,cAAc,oBAAoB,QAASG,CAAkB,EAEhE,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH"}